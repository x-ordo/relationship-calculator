:root {
  color-scheme: dark;

  /* ========================================
     Fluent 2 Design System - Dark Theme (Default)
     ======================================== */

  /* Color - Neutral Background */
  --colorNeutralBackground1: #292929;
  --colorNeutralBackground1Hover: #3d3d3d;
  --colorNeutralBackground1Pressed: #1f1f1f;
  --colorNeutralBackground2: #1f1f1f;
  --colorNeutralBackground3: #141414;
  --colorNeutralBackground4: #0a0a0a;
  --colorNeutralBackgroundDisabled: #141414;

  /* Color - Neutral Foreground */
  --colorNeutralForeground1: #ffffff;
  --colorNeutralForeground2: #d6d6d6;
  --colorNeutralForeground3: #adadad;
  --colorNeutralForeground4: #999999;
  --colorNeutralForegroundDisabled: #5c5c5c;

  /* Color - Neutral Stroke */
  --colorNeutralStroke1: #3d3d3d;
  --colorNeutralStroke1Hover: #525252;
  --colorNeutralStroke1Pressed: #3d3d3d;
  --colorNeutralStroke2: #525252;
  --colorNeutralStrokeDisabled: #2e2e2e;

  /* Color - Brand */
  --colorBrandBackground: #2899f5;
  --colorBrandBackgroundHover: #3aa0f3;
  --colorBrandBackgroundPressed: #1890f1;
  --colorBrandBackgroundSelected: #1890f1;
  --colorBrandForeground1: #82c7ff;
  --colorBrandForeground2: #c7e0f4;
  --colorBrandStroke1: #2899f5;

  /* Color - Subtle (for secondary buttons) */
  --colorSubtleBackground: transparent;
  --colorSubtleBackgroundHover: rgba(255,255,255,0.06);
  --colorSubtleBackgroundPressed: rgba(255,255,255,0.04);
  --colorSubtleBackgroundSelected: rgba(255,255,255,0.08);

  /* Color - Status */
  --colorStatusDangerBackground1: rgba(196,49,75,0.15);
  --colorStatusDangerBackground2: rgba(196,49,75,0.25);
  --colorStatusDangerForeground1: #dc626d;
  --colorStatusDangerForeground2: #f87c7c;
  --colorStatusSuccessBackground1: rgba(16,124,16,0.15);
  --colorStatusSuccessBackground2: rgba(16,124,16,0.25);
  --colorStatusSuccessForeground1: #54b054;
  --colorStatusSuccessForeground2: #92d992;
  --colorStatusWarningBackground1: rgba(234,179,8,0.12);
  --colorStatusWarningForeground1: #fde68a;

  /* Border Radius */
  --borderRadiusNone: 0;
  --borderRadiusSmall: 2px;
  --borderRadiusMedium: 4px;
  --borderRadiusLarge: 6px;
  --borderRadiusXLarge: 8px;
  --borderRadiusCircular: 10000px;

  /* Stroke Width */
  --strokeWidthThin: 1px;
  --strokeWidthThick: 2px;
  --strokeWidthThicker: 3px;
  --strokeWidthThickest: 4px;

  /* Spacing (4px base) */
  --spacingNone: 0;
  --spacingXXS: 2px;
  --spacingXS: 4px;
  --spacingSNudge: 6px;
  --spacingS: 8px;
  --spacingMNudge: 10px;
  --spacingM: 12px;
  --spacingL: 16px;
  --spacingXL: 20px;
  --spacingXXL: 24px;
  --spacingXXXL: 32px;

  /* Typography - Font Family */
  --fontFamilyBase: 'Segoe UI Variable', 'Segoe UI', -apple-system, BlinkMacSystemFont, 'SF Pro Text', system-ui, sans-serif;
  --fontFamilyMonospace: 'Cascadia Code', 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace;

  /* Typography - Font Size */
  --fontSizeBase100: 10px;
  --fontSizeBase200: 12px;
  --fontSizeBase300: 14px;
  --fontSizeBase400: 16px;
  --fontSizeBase500: 20px;
  --fontSizeBase600: 24px;
  --fontSizeHero700: 28px;
  --fontSizeHero800: 32px;
  --fontSizeHero900: 40px;
  --fontSizeHero1000: 68px;

  /* Typography - Line Height */
  --lineHeightBase100: 14px;
  --lineHeightBase200: 16px;
  --lineHeightBase300: 20px;
  --lineHeightBase400: 22px;
  --lineHeightBase500: 26px;
  --lineHeightBase600: 32px;
  --lineHeightHero700: 36px;
  --lineHeightHero800: 40px;
  --lineHeightHero900: 52px;

  /* Typography - Font Weight */
  --fontWeightRegular: 400;
  --fontWeightSemibold: 600;
  --fontWeightBold: 700;

  /* Shadow */
  --shadow2: 0 1px 2px rgba(0,0,0,0.24);
  --shadow4: 0 2px 4px rgba(0,0,0,0.28);
  --shadow8: 0 4px 8px rgba(0,0,0,0.28);
  --shadow16: 0 8px 16px rgba(0,0,0,0.28);
  --shadow28: 0 14px 28px rgba(0,0,0,0.32);
  --shadow64: 0 32px 64px rgba(0,0,0,0.40);

  /* Motion - Duration */
  --durationUltraFast: 50ms;
  --durationFaster: 100ms;
  --durationFast: 150ms;
  --durationNormal: 200ms;
  --durationGentle: 250ms;
  --durationSlow: 300ms;
  --durationSlower: 400ms;
  --durationUltraSlow: 500ms;

  /* Motion - Easing */
  --curveAccelerateMax: cubic-bezier(0.9,0.1,1,0.2);
  --curveAccelerateMid: cubic-bezier(1,0,1,1);
  --curveAccelerateMin: cubic-bezier(0.8,0,0.78,1);
  --curveDecelerateMax: cubic-bezier(0.1,0.9,0.2,1);
  --curveDecelerateMid: cubic-bezier(0,0,0,1);
  --curveDecelerateMin: cubic-bezier(0.33,0,0.1,1);
  --curveEasyEaseMax: cubic-bezier(0.8,0,0.2,1);
  --curveEasyEase: cubic-bezier(0.33,0,0.67,1);
  --curveLinear: cubic-bezier(0,0,1,1);

  /* Focus Ring */
  --focusStrokeOuter: #ffffff;
  --focusStrokeInner: #000000;

  /* Legacy aliases */
  --bg: var(--colorNeutralBackground3);
  --panel: var(--colorNeutralBackground2);
  --border: var(--colorNeutralStroke1);
  --text: var(--colorNeutralForeground1);
  --muted: var(--colorNeutralForeground3);
  --accent: var(--colorBrandBackground);
  --danger: var(--colorStatusDangerForeground1);
  --ok: var(--colorStatusSuccessForeground1);
}

/* ========================================
   Light Theme
   ======================================== */
[data-theme="light"] {
  color-scheme: light;

  /* Color - Neutral Background */
  --colorNeutralBackground1: #ffffff;
  --colorNeutralBackground1Hover: #f5f5f5;
  --colorNeutralBackground1Pressed: #e0e0e0;
  --colorNeutralBackground2: #fafafa;
  --colorNeutralBackground3: #f5f5f5;
  --colorNeutralBackground4: #ebebeb;
  --colorNeutralBackgroundDisabled: #f0f0f0;

  /* Color - Neutral Foreground */
  --colorNeutralForeground1: #242424;
  --colorNeutralForeground2: #424242;
  --colorNeutralForeground3: #616161;
  --colorNeutralForeground4: #757575;
  --colorNeutralForegroundDisabled: #bdbdbd;

  /* Color - Neutral Stroke */
  --colorNeutralStroke1: #d1d1d1;
  --colorNeutralStroke1Hover: #c7c7c7;
  --colorNeutralStroke1Pressed: #b3b3b3;
  --colorNeutralStroke2: #e0e0e0;
  --colorNeutralStrokeDisabled: #e0e0e0;

  /* Color - Brand */
  --colorBrandBackground: #0f6cbd;
  --colorBrandBackgroundHover: #115ea3;
  --colorBrandBackgroundPressed: #0c5388;
  --colorBrandBackgroundSelected: #0c5388;
  --colorBrandForeground1: #0f6cbd;
  --colorBrandForeground2: #115ea3;
  --colorBrandStroke1: #0f6cbd;

  /* Color - Subtle */
  --colorSubtleBackground: transparent;
  --colorSubtleBackgroundHover: rgba(0,0,0,0.04);
  --colorSubtleBackgroundPressed: rgba(0,0,0,0.06);
  --colorSubtleBackgroundSelected: rgba(0,0,0,0.08);

  /* Color - Status */
  --colorStatusDangerBackground1: rgba(196,49,75,0.1);
  --colorStatusDangerBackground2: rgba(196,49,75,0.2);
  --colorStatusDangerForeground1: #c4314b;
  --colorStatusDangerForeground2: #a42e3e;
  --colorStatusSuccessBackground1: rgba(16,124,16,0.1);
  --colorStatusSuccessBackground2: rgba(16,124,16,0.2);
  --colorStatusSuccessForeground1: #107c10;
  --colorStatusSuccessForeground2: #0e6b0e;
  --colorStatusWarningBackground1: rgba(234,179,8,0.1);
  --colorStatusWarningForeground1: #c19c00;

  /* Shadow - lighter for light mode */
  --shadow2: 0 1px 2px rgba(0,0,0,0.12);
  --shadow4: 0 2px 4px rgba(0,0,0,0.14);
  --shadow8: 0 4px 8px rgba(0,0,0,0.14);
  --shadow16: 0 8px 16px rgba(0,0,0,0.14);
  --shadow28: 0 14px 28px rgba(0,0,0,0.18);

  /* Focus Ring */
  --focusStrokeOuter: #000000;
  --focusStrokeInner: #ffffff;
}

/* ========================================
   Base Styles
   ======================================== */
* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  background: var(--colorNeutralBackground4);
  color: var(--colorNeutralForeground1);
  font-family: var(--fontFamilyBase);
  font-size: var(--fontSizeBase300);
  line-height: var(--lineHeightBase300);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  color: var(--colorBrandForeground1);
  text-decoration: none;
  transition: color var(--durationFast) var(--curveEasyEase);
}
a:hover { color: var(--colorBrandForeground2); }

::selection {
  background: rgba(40,153,245,0.3);
  color: var(--colorNeutralForeground1);
}

/* Focus Ring - Accessibility */
:focus-visible {
  outline: var(--strokeWidthThick) solid var(--focusStrokeOuter);
  outline-offset: var(--strokeWidthThin);
}

/* ========================================
   Layout
   ======================================== */
.container {
  max-width: 1120px;
  margin: 0 auto;
  padding: var(--spacingXL);
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacingM);
  padding: var(--spacingM) var(--spacingL);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  border-radius: var(--borderRadiusXLarge);
  box-shadow: var(--shadow4);
}

.brand {
  display: flex;
  gap: var(--spacingS);
  align-items: center;
}

/* ========================================
   Typography
   ======================================== */
.caption2 { font-size: var(--fontSizeBase100); line-height: var(--lineHeightBase100); }
.caption1 { font-size: var(--fontSizeBase200); line-height: var(--lineHeightBase200); }
.body1 { font-size: var(--fontSizeBase300); line-height: var(--lineHeightBase300); }
.body2 { font-size: var(--fontSizeBase400); line-height: var(--lineHeightBase400); }
.subtitle2 { font-size: var(--fontSizeBase400); line-height: var(--lineHeightBase400); font-weight: var(--fontWeightSemibold); }
.subtitle1 { font-size: var(--fontSizeBase500); line-height: var(--lineHeightBase500); font-weight: var(--fontWeightSemibold); }
.title3 { font-size: var(--fontSizeBase600); line-height: var(--lineHeightBase600); font-weight: var(--fontWeightSemibold); }
.title2 { font-size: var(--fontSizeHero700); line-height: var(--lineHeightHero700); font-weight: var(--fontWeightSemibold); }
.title1 { font-size: var(--fontSizeHero800); line-height: var(--lineHeightHero800); font-weight: var(--fontWeightSemibold); }

.h1 { font-size: var(--fontSizeBase600); font-weight: var(--fontWeightSemibold); line-height: var(--lineHeightBase600); letter-spacing: -0.02em; }
.h2 { font-size: var(--fontSizeBase400); font-weight: var(--fontWeightSemibold); line-height: var(--lineHeightBase400); }
.hint { color: var(--colorNeutralForeground3); font-size: var(--fontSizeBase200); line-height: var(--lineHeightBase200); }
.muted { color: var(--colorNeutralForeground3); }
.mono { font-family: var(--fontFamilyMonospace); }

/* ========================================
   Badge / Pill
   ======================================== */
.badge {
  display: inline-flex;
  align-items: center;
  font-size: var(--fontSizeBase200);
  font-weight: var(--fontWeightSemibold);
  padding: var(--spacingXXS) var(--spacingS);
  border-radius: var(--borderRadiusCircular);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  color: var(--colorNeutralForeground3);
  background: transparent;
}

.badge.ok {
  border-color: var(--colorStatusSuccessForeground1);
  color: var(--colorStatusSuccessForeground1);
  background: var(--colorStatusSuccessBackground1);
}

.badge.danger {
  border-color: var(--colorStatusDangerForeground1);
  color: var(--colorStatusDangerForeground1);
  background: var(--colorStatusDangerBackground1);
}

.pill {
  display: inline-flex;
  align-items: center;
  border-radius: var(--borderRadiusCircular);
  padding: var(--spacingXXS) var(--spacingS);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  font-size: var(--fontSizeBase200);
  color: var(--colorNeutralForeground3);
}

.pill.warn {
  border-color: var(--colorStatusWarningForeground1);
  color: var(--colorStatusWarningForeground1);
  background: var(--colorStatusWarningBackground1);
}
.pill.danger {
  border-color: var(--colorStatusDangerForeground1);
  color: var(--colorStatusDangerForeground1);
  background: var(--colorStatusDangerBackground1);
}
.pill.safe {
  border-color: var(--colorStatusSuccessForeground1);
  color: var(--colorStatusSuccessForeground1);
  background: var(--colorStatusSuccessBackground1);
}

.pillMini {
  display: inline-block;
  padding: var(--spacingXXS) var(--spacingXS);
  border-radius: var(--borderRadiusCircular);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  font-size: var(--fontSizeBase100);
  color: var(--colorNeutralForeground3);
}

/* ========================================
   Tabs
   ======================================== */
.tabs {
  display: flex;
  gap: var(--spacingXS);
  flex-wrap: wrap;
}

.tab {
  padding: var(--spacingS) var(--spacingM);
  border-radius: var(--borderRadiusMedium);
  border: var(--strokeWidthThin) solid transparent;
  background: var(--colorSubtleBackground);
  color: var(--colorNeutralForeground2);
  cursor: pointer;
  font-weight: var(--fontWeightSemibold);
  font-size: var(--fontSizeBase300);
  transition: all var(--durationFast) var(--curveEasyEase);
}
.tab:hover {
  background: var(--colorSubtleBackgroundHover);
  color: var(--colorNeutralForeground1);
}
.tab:active {
  background: var(--colorSubtleBackgroundPressed);
}
.tab.active {
  border-color: var(--colorBrandStroke1);
  background: rgba(40,153,245,0.12);
  color: var(--colorBrandForeground1);
}

/* ========================================
   Panel / Card
   ======================================== */
.panel {
  margin-top: var(--spacingM);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground3);
  border-radius: var(--borderRadiusXLarge);
  padding: var(--spacingL);
  box-shadow: var(--shadow4);
}

.card {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingM);
  transition: box-shadow var(--durationFast) var(--curveEasyEase);
}
.card:hover {
  box-shadow: var(--shadow8);
}

.cardPreviewWrap {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  border-radius: var(--borderRadiusXLarge);
  overflow: hidden;
  background: var(--colorNeutralBackground2);
}

/* ========================================
   Grid / Layout Utilities
   ======================================== */
.grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--spacingM);
}
@media (min-width: 640px) {
  .grid.cols-2 { grid-template-columns: 1fr 1fr; }
}
@media (min-width: 1024px) {
  .grid.cols-3 { grid-template-columns: 1fr 1fr 1fr; }
}

.row {
  display: flex;
  gap: var(--spacingS);
  flex-wrap: wrap;
  align-items: center;
}

.hr {
  height: var(--strokeWidthThin);
  background: var(--colorNeutralStroke1);
  margin: var(--spacingM) 0;
  border: none;
}

/* ========================================
   Form Controls - Input
   ======================================== */
.input, select {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  color: var(--colorNeutralForeground1);
  padding: var(--spacingSNudge) var(--spacingM);
  border-radius: var(--borderRadiusMedium);
  outline: none;
  font-family: var(--fontFamilyBase);
  font-size: var(--fontSizeBase300);
  line-height: var(--lineHeightBase300);
  min-height: 32px;
  transition: border-color var(--durationFast) var(--curveEasyEase),
              background var(--durationFast) var(--curveEasyEase);
}
.input::placeholder { color: var(--colorNeutralForeground4); }
.input:hover, select:hover {
  border-color: var(--colorNeutralStroke1Hover);
}
.input:focus, select:focus {
  border-color: var(--colorBrandStroke1);
  border-width: var(--strokeWidthThick);
  padding: calc(var(--spacingSNudge) - 1px) calc(var(--spacingM) - 1px);
}
.input:disabled, select:disabled {
  background: var(--colorNeutralBackgroundDisabled);
  border-color: var(--colorNeutralStrokeDisabled);
  color: var(--colorNeutralForegroundDisabled);
  cursor: not-allowed;
}

.input.small {
  width: 120px;
  min-width: 80px;
  flex-shrink: 1;
}

.textarea {
  width: 100%;
  min-height: 120px;
  resize: vertical;
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  color: var(--colorNeutralForeground1);
  padding: var(--spacingS) var(--spacingM);
  border-radius: var(--borderRadiusMedium);
  font-family: var(--fontFamilyBase);
  font-size: var(--fontSizeBase300);
  line-height: var(--lineHeightBase300);
  transition: border-color var(--durationFast) var(--curveEasyEase);
}
.textarea::placeholder { color: var(--colorNeutralForeground4); }
.textarea:hover { border-color: var(--colorNeutralStroke1Hover); }
.textarea:focus {
  border-color: var(--colorBrandStroke1);
  border-width: var(--strokeWidthThick);
  padding: calc(var(--spacingS) - 1px) calc(var(--spacingM) - 1px);
  outline: none;
}

/* ========================================
   Button
   ======================================== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacingXS);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  color: var(--colorNeutralForeground1);
  padding: var(--spacingSNudge) var(--spacingM);
  min-height: 32px;
  border-radius: var(--borderRadiusMedium);
  cursor: pointer;
  font-family: var(--fontFamilyBase);
  font-weight: var(--fontWeightSemibold);
  font-size: var(--fontSizeBase300);
  line-height: 1;
  text-decoration: none;
  user-select: none;
  transition: background var(--durationFast) var(--curveEasyEase),
              border-color var(--durationFast) var(--curveEasyEase),
              color var(--durationFast) var(--curveEasyEase),
              transform var(--durationFaster) var(--curveEasyEase);
}
.btn:hover {
  background: var(--colorNeutralBackground1Hover);
  border-color: var(--colorNeutralStroke1Hover);
}
.btn:active {
  background: var(--colorNeutralBackground1Pressed);
  transform: scale(0.98);
}
.btn:disabled, .btn.disabled {
  background: var(--colorNeutralBackgroundDisabled);
  border-color: var(--colorNeutralStrokeDisabled);
  color: var(--colorNeutralForegroundDisabled);
  cursor: not-allowed;
  transform: none;
}

/* Primary Button */
.btn.primary {
  background: var(--colorBrandBackground);
  color: #000000;
  border-color: var(--colorBrandBackground);
}
.btn.primary:hover {
  background: var(--colorBrandBackgroundHover);
  border-color: var(--colorBrandBackgroundHover);
}
.btn.primary:active {
  background: var(--colorBrandBackgroundPressed);
  border-color: var(--colorBrandBackgroundPressed);
}

/* Danger Button */
.btn.danger {
  background: var(--colorStatusDangerBackground1);
  border-color: var(--colorStatusDangerForeground1);
  color: var(--colorStatusDangerForeground1);
}
.btn.danger:hover {
  background: var(--colorStatusDangerBackground2);
}

/* Subtle Button */
.btn.subtle {
  background: transparent;
  border-color: transparent;
}
.btn.subtle:hover {
  background: var(--colorSubtleBackgroundHover);
  border-color: transparent;
}

/* ========================================
   KPI / Stats
   ======================================== */
.kpi {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingM);
}
.kpi .label {
  color: var(--colorNeutralForeground3);
  font-size: var(--fontSizeBase200);
  line-height: var(--lineHeightBase200);
}
.kpi .value {
  font-size: var(--fontSizeBase600);
  font-weight: var(--fontWeightSemibold);
  line-height: var(--lineHeightBase600);
  margin-top: var(--spacingXXS);
}

.stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacingS); }
.stat {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingM);
}

.big {
  font-size: var(--fontSizeBase600);
  font-weight: var(--fontWeightSemibold);
  line-height: var(--lineHeightBase600);
  letter-spacing: -0.02em;
}
.big.danger { color: var(--colorStatusDangerForeground1); }
.danger { color: var(--colorStatusDangerForeground1); }
.ok { color: var(--colorStatusSuccessForeground1); }

/* ========================================
   Table
   ======================================== */
.table {
  width: 100%;
  border-collapse: collapse;
  overflow: hidden;
  border-radius: var(--borderRadiusLarge);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
}
.table th, .table td {
  text-align: left;
  padding: var(--spacingS) var(--spacingM);
  border-bottom: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  font-size: var(--fontSizeBase300);
}
.table th {
  color: var(--colorNeutralForeground3);
  font-weight: var(--fontWeightSemibold);
  background: var(--colorNeutralBackground2);
}
.table tr:last-child td { border-bottom: none; }
.table tr:hover td { background: var(--colorNeutralBackground1); }

/* div-based table (mobile friendly) */
.thead, .trow {
  display: grid;
  grid-template-columns: 1.4fr 1fr 0.9fr 0.6fr;
  gap: var(--spacingS);
  padding: var(--spacingS) var(--spacingM);
  border-bottom: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
}
.thead {
  color: var(--colorNeutralForeground3);
  font-weight: var(--fontWeightSemibold);
  font-size: var(--fontSizeBase200);
  background: var(--colorNeutralBackground2);
}
.trow {
  font-size: var(--fontSizeBase300);
  transition: background var(--durationFast) var(--curveEasyEase);
}
.trow:hover { background: var(--colorNeutralBackground1); }

/* ========================================
   Modal / Dialog
   ======================================== */
.modalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
  animation: fadeIn var(--durationFast) var(--curveDecelerateMax);
}

.modal {
  width: min(940px, 92vw);
  max-height: min(86vh, 980px);
  overflow: auto;
  border-radius: var(--borderRadiusXLarge);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground3);
  padding: var(--spacingXL);
  box-shadow: var(--shadow64);
  animation: slideUp var(--durationNormal) var(--curveDecelerateMax);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(16px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ========================================
   Callout / Alert
   ======================================== */
.callout {
  border: var(--strokeWidthThin) solid var(--colorBrandStroke1);
  background: rgba(40,153,245,0.08);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingM);
}
.callout.ok {
  border-color: var(--colorStatusSuccessForeground1);
  background: var(--colorStatusSuccessBackground1);
}
.callout.danger {
  border-color: var(--colorStatusDangerForeground1);
  background: var(--colorStatusDangerBackground1);
}

/* ========================================
   List
   ======================================== */
.list { display: grid; gap: var(--spacingS); }
.listItem {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingM);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacingM);
  transition: background var(--durationFast) var(--curveEasyEase);
}
.listItem:hover {
  background: var(--colorNeutralBackground1);
}

.note {
  margin-top: var(--spacingXS);
  font-size: var(--fontSizeBase200);
  line-height: var(--lineHeightBase200);
  color: var(--colorNeutralForeground2);
  white-space: pre-wrap;
  background: var(--colorNeutralBackground2);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  padding: var(--spacingS);
  border-radius: var(--borderRadiusMedium);
}

/* ========================================
   Quick Log Bar
   ======================================== */
.quickbar {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground3);
  border-radius: var(--borderRadiusXLarge);
  padding: var(--spacingM);
}

.qGroup {
  display: grid;
  gap: var(--spacingXS);
  align-content: start;
}

.qLabel {
  font-size: var(--fontSizeBase200);
  font-weight: var(--fontWeightSemibold);
  color: var(--colorNeutralForeground3);
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.qButtons {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacingXS);
  align-items: center;
}

.qBtn {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  color: var(--colorNeutralForeground2);
  padding: var(--spacingXS) var(--spacingS);
  border-radius: var(--borderRadiusCircular);
  cursor: pointer;
  font-weight: var(--fontWeightSemibold);
  font-size: var(--fontSizeBase200);
  transition: all var(--durationFast) var(--curveEasyEase);
}
.qBtn:hover {
  background: var(--colorNeutralBackground1);
  color: var(--colorNeutralForeground1);
  border-color: var(--colorNeutralStroke1Hover);
}
.qBtn:active {
  transform: scale(0.96);
}

.qBtn.on {
  border-color: var(--colorBrandStroke1);
  background: rgba(40,153,245,0.12);
  color: var(--colorBrandForeground1);
}

.qBtn.on.danger {
  border-color: var(--colorStatusDangerForeground1);
  background: var(--colorStatusDangerBackground1);
  color: var(--colorStatusDangerForeground1);
}

.qInput {
  width: 80px;
  min-width: 60px;
  flex-shrink: 1;
}

/* ========================================
   Onboarding
   ======================================== */
.obModal { width: min(940px, 94vw); }
.obDots { display: flex; gap: var(--spacingS); margin-top: var(--spacingS); }
.obDot {
  width: 8px;
  height: 8px;
  border-radius: var(--borderRadiusCircular);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke2);
  background: transparent;
  transition: all var(--durationFast) var(--curveEasyEase);
}
.obDot.on {
  background: var(--colorBrandBackground);
  border-color: var(--colorBrandBackground);
  transform: scale(1.2);
}

.obList {
  margin: var(--spacingS) 0 0;
  padding-left: var(--spacingL);
  color: var(--colorNeutralForeground1);
}
.obList li { margin: var(--spacingS) 0; }

.obPeople { display: flex; flex-wrap: wrap; gap: var(--spacingS); margin-top: var(--spacingS); }
.obChip {
  display: inline-flex;
  align-items: center;
  padding: var(--spacingXS) var(--spacingS);
  border-radius: var(--borderRadiusCircular);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  font-size: var(--fontSizeBase200);
  font-weight: var(--fontWeightSemibold);
  transition: all var(--durationFast) var(--curveEasyEase);
}
.obChip:hover {
  background: var(--colorNeutralBackground1);
}

.obPreview {
  margin-top: var(--spacingS);
  border-radius: var(--borderRadiusLarge);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  padding: var(--spacingM);
}
.obPreviewTop { display: flex; justify-content: space-between; align-items: center; gap: var(--spacingS); }
.obBig { font-size: var(--fontSizeHero800); font-weight: var(--fontWeightSemibold); letter-spacing: -0.02em; margin-top: var(--spacingM); }
.obKpis { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacingS); margin-top: var(--spacingM); }
.obKpi {
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground2);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingS);
}

/* ========================================
   FAB (Floating Action Button)
   ======================================== */
.fab {
  position: fixed;
  right: var(--spacingL);
  right: max(var(--spacingL), env(safe-area-inset-right, 0px));
  bottom: var(--spacingL);
  bottom: calc(var(--spacingL) + env(safe-area-inset-bottom, 0px));
  z-index: 45;
  border: none;
  background: var(--colorBrandBackground);
  color: #000000;
  padding: var(--spacingM) var(--spacingL);
  border-radius: var(--borderRadiusCircular);
  font-weight: var(--fontWeightSemibold);
  font-size: var(--fontSizeBase300);
  cursor: pointer;
  box-shadow: var(--shadow16);
  transition: all var(--durationFast) var(--curveEasyEase);
}
.fab:hover {
  background: var(--colorBrandBackgroundHover);
  box-shadow: var(--shadow28);
  transform: translateY(-2px);
}
.fab:active {
  background: var(--colorBrandBackgroundPressed);
  transform: translateY(0) scale(0.98);
}
.fab.disabled {
  opacity: 0.4;
  cursor: not-allowed;
  background: var(--colorNeutralBackground1);
  color: var(--colorNeutralForegroundDisabled);
  transform: none;
  box-shadow: var(--shadow4);
}
@media (min-width: 900px) {
  .fab { display: none; }
}

/* ========================================
   Bottom Sheet
   ======================================== */
.sheetOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  z-index: 60;
  padding: var(--spacingS);
  animation: fadeIn var(--durationFast) var(--curveDecelerateMax);
}
.sheet {
  width: min(980px, 96vw);
  max-height: 88vh;
  overflow: auto;
  border-radius: var(--borderRadiusXLarge) var(--borderRadiusXLarge) var(--borderRadiusMedium) var(--borderRadiusMedium);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  background: var(--colorNeutralBackground3);
  padding: var(--spacingM);
  padding-bottom: calc(var(--spacingM) + env(safe-area-inset-bottom, 0px));
  box-shadow: var(--shadow64);
  animation: slideUpSheet var(--durationNormal) var(--curveDecelerateMax);
}

@keyframes slideUpSheet {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.quickbar.compact {
  padding: var(--spacingM);
  border-radius: var(--borderRadiusLarge);
}

/* ========================================
   Animations
   ======================================== */
@keyframes rr-pop {
  0%   { transform: scale(0.96); }
  50%  { transform: scale(1.02); }
  100% { transform: scale(1); }
}
.rr-pop {
  animation: rr-pop var(--durationFast) var(--curveDecelerateMax);
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ========================================
   Footer
   ======================================== */
.footer {
  margin-top: var(--spacingL);
  padding: var(--spacingS) var(--spacingXS);
  color: var(--colorNeutralForeground4);
  font-size: var(--fontSizeBase200);
}

/* ========================================
   Responsive - Mobile
   ======================================== */
@media (max-width: 520px) {
  .stats { grid-template-columns: 1fr; }
  .thead, .trow { grid-template-columns: 1.2fr 1fr 0.8fr 0.6fr; font-size: var(--fontSizeBase200); }
}

@media (max-width: 480px) {
  .container { padding: var(--spacingM); }

  .topbar {
    flex-direction: column;
    align-items: stretch;
    gap: var(--spacingS);
    padding: var(--spacingS) var(--spacingM);
  }

  .brand { justify-content: center; }
  .tabs { justify-content: center; }

  .tab {
    padding: var(--spacingXS) var(--spacingS);
    font-size: var(--fontSizeBase200);
  }

  .h1 { font-size: var(--fontSizeBase500); }
  .panel { padding: var(--spacingM); }
}

/* QuickLogBar - Mobile */
@media (max-width: 520px) {
  .quickbar .row {
    flex-direction: column;
    align-items: stretch;
  }

  .qGroup { width: 100%; }
  .qButtons { flex-wrap: wrap; }

  .qBtn {
    flex: 1 1 auto;
    min-width: 44px;
    min-height: 36px;
    padding: var(--spacingXS) var(--spacingSNudge);
    font-size: var(--fontSizeBase200);
    text-align: center;
  }

  .qInput {
    width: 100%;
    max-width: 100px;
    min-height: 36px;
  }

  .qLabel {
    font-size: var(--fontSizeBase100);
  }
}

/* Extra small screens */
@media (max-width: 380px) {
  .qBtn {
    min-width: 38px;
    padding: var(--spacingXXS) var(--spacingXS);
    font-size: var(--fontSizeBase100);
  }

  .qInput {
    max-width: 80px;
  }

  .quickbar {
    padding: var(--spacingS);
  }
}

/* ========================================
   Accessibility - Reduced Motion
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ========================================
   Receipt Card (영수증 스타일)
   ======================================== */
.receipt-card {
  background: var(--colorNeutralBackground4);
  border: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  border-radius: var(--borderRadiusLarge);
  padding: var(--spacingL);
  font-family: var(--fontFamilyMonospace);
  max-width: 400px;
  margin: var(--spacingM) auto;
  box-shadow: var(--shadow8);
}

.receipt-header {
  text-align: center;
  padding-bottom: var(--spacingM);
}

.receipt-store {
  font-size: var(--fontSizeBase500);
  font-weight: var(--fontWeightBold);
  color: var(--colorNeutralForeground1);
  letter-spacing: 0.05em;
}

.receipt-subtitle {
  font-size: var(--fontSizeBase200);
  color: var(--colorNeutralForeground3);
  margin-top: var(--spacingXXS);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.receipt-divider {
  margin: var(--spacingM) 0;
  height: 0;
}

.receipt-divider.dashed {
  border-bottom: var(--strokeWidthThin) dashed var(--colorNeutralStroke2);
}

.receipt-divider.solid {
  border-bottom: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
}

.receipt-meta {
  font-size: var(--fontSizeBase200);
  color: var(--colorNeutralForeground3);
}

.receipt-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacingXXS) 0;
  gap: var(--spacingS);
}

.receipt-row.header {
  font-weight: var(--fontWeightBold);
  color: var(--colorNeutralForeground2);
  border-bottom: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  padding-bottom: var(--spacingS);
  margin-bottom: var(--spacingXS);
}

.receipt-items {
  font-size: var(--fontSizeBase300);
  color: var(--colorNeutralForeground2);
}

.receipt-row.subtotal {
  margin-top: var(--spacingS);
  padding-top: var(--spacingS);
  border-top: var(--strokeWidthThin) dashed var(--colorNeutralStroke2);
  font-weight: var(--fontWeightSemibold);
}

.receipt-row.total {
  margin-top: var(--spacingS);
  padding-top: var(--spacingS);
  border-top: var(--strokeWidthThick) solid var(--colorNeutralStroke1);
  font-size: var(--fontSizeBase500);
  font-weight: var(--fontWeightBold);
}

.receipt-row.highlight {
  color: var(--colorStatusDangerForeground1);
}

.receipt-cause {
  font-size: var(--fontSizeBase300);
  color: var(--colorNeutralForeground2);
}

.receipt-cause .accent {
  color: var(--colorBrandForeground1);
  font-weight: var(--fontWeightSemibold);
}

.receipt-empty {
  text-align: center;
  padding: var(--spacingXL) 0;
}

.receipt-empty-title {
  font-size: var(--fontSizeBase400);
  font-weight: var(--fontWeightBold);
  color: var(--colorNeutralForeground2);
}

.receipt-empty-hint {
  font-size: var(--fontSizeBase200);
  color: var(--colorNeutralForeground4);
  margin-top: var(--spacingXS);
}

.receipt-footer {
  text-align: center;
  padding-top: var(--spacingM);
}

.receipt-verdict {
  font-size: var(--fontSizeBase300);
  font-weight: var(--fontWeightSemibold);
  color: var(--colorStatusWarningForeground1);
  margin-bottom: var(--spacingS);
}

.receipt-brand {
  font-size: var(--fontSizeBase100);
  color: var(--colorNeutralForeground4);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.receipt-tear {
  margin-top: var(--spacingL);
  height: 12px;
  background-image: linear-gradient(
    135deg,
    var(--colorNeutralBackground4) 25%,
    transparent 25%,
    transparent 50%,
    var(--colorNeutralBackground4) 50%,
    var(--colorNeutralBackground4) 75%,
    transparent 75%
  );
  background-size: 12px 12px;
  background-position: 0 0;
}

/* ========================================
   Bottom Navigation (Mobile)
   ======================================== */
.bottom-nav {
  display: none;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: var(--colorNeutralBackground2);
  border-top: var(--strokeWidthThin) solid var(--colorNeutralStroke1);
  padding: var(--spacingS);
  padding-bottom: calc(var(--spacingS) + env(safe-area-inset-bottom, 0px));
  box-shadow: 0 -4px 16px rgba(0,0,0,0.2);
}

.bottom-nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacingXXS);
  padding: var(--spacingXS) var(--spacingS);
  background: transparent;
  border: none;
  border-radius: var(--borderRadiusMedium);
  color: var(--colorNeutralForeground3);
  cursor: pointer;
  transition: all var(--durationFast) var(--curveEasyEase);
}

.bottom-nav-item:hover {
  background: var(--colorSubtleBackgroundHover);
  color: var(--colorNeutralForeground2);
}

.bottom-nav-item:active {
  transform: scale(0.95);
}

.bottom-nav-item.active {
  color: var(--colorBrandForeground1);
}

.bottom-nav-item.active::after {
  content: '';
  position: absolute;
  bottom: calc(var(--spacingXXS) + env(safe-area-inset-bottom, 0px));
  left: 50%;
  transform: translateX(-50%);
  width: 20px;
  height: 3px;
  background: var(--colorBrandBackground);
  border-radius: var(--borderRadiusCircular);
}

.bottom-nav-icon {
  font-size: 20px;
  line-height: 1;
}

.bottom-nav-label {
  font-size: var(--fontSizeBase100);
  font-weight: var(--fontWeightSemibold);
}

/* Show bottom nav on mobile, hide topbar tabs */
@media (max-width: 768px) {
  .bottom-nav {
    display: flex;
  }

  /* Hide topbar tabs on mobile */
  .topbar .tabs {
    display: none;
  }

  /* Add padding at bottom for content */
  .app {
    padding-bottom: calc(60px + env(safe-area-inset-bottom, 0px));
  }

  /* Adjust FAB position to account for bottom nav */
  .fab {
    bottom: calc(70px + env(safe-area-inset-bottom, 0px));
  }
}

/* Ensure bottom nav item is relatively positioned for ::after */
.bottom-nav-item {
  position: relative;
}
